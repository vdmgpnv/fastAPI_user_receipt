# fastAPI_user_receipt

## Для установки зависимостей в корневой папке ввести команду:

    pip install -r requirements.txt

## Для запуска сервера: 

    uvicorn main:app

### БД находится в облаке, никаких действий дополнительных совершать не нужно
---
Некоторые функции(смена статуса пользователей и рецептов) требуют прав администратора. Для доступа к таким функциям аккаунт

    username: vadim
    password: 1234

Все эндпойнты можно посмотреть, протестировать по адресу

    http://127.0.0.1:8000/docs

Для регистрации POST-метод с JSON

    {
    "username": "ваш логин",
    "password": "ваш пароль"
    }

на адрес:

    http://127.0.0.1:8000/user/create


Для авторизации POST-запрос с логином и паролем на адрес:

     http://127.0.0.1:8000/token

В ответ прилетит токен, который необходимо добавить в HEADERS запроса Authorization : Bearer <Ваш токен>

Или же авторизоваться на 

    http://127.0.0.1:8000/docs 

в правом верхнем углу, так как все остальные эндпойнты требуют авторизации
![alt text](https://clip2net.com/clip/m0/6a055-clip-37kb.png?nocache=1)


## Получение профиля пользователя(GET):

    http://127.0.0.1:8000/user/get_user

## Получение первых 10 пользователей, отсортированных по кол-ву добавленных рецептов(GET):

    http://127.0.0.1:8000/user/get_first_ten_users

## Забанить пользователя(сменить статус на неактивный) PUT-Запрос:

    http://127.0.0.1:8000/admin/ban_user/<id-пользователя, которого хотим забанить>

## Разабанить пользователя(сменить статус на активный) PUT-Запрос:

    http://127.0.0.1:8000/admin/unban_user/<id-пользователя, которого хотим разабанить>

## Сменить свой ник-нейм(POST) c новым именем:
    http://127.0.0.1:8000/user/update_nickname

## Удалить своего пользователя и все, что с ним связано(DELETE):

    http://127.0.0.1:8000/user/delete

## Получить список избранных рецептов(GET):

    http://127.0.0.1:8000/user/fauvorites


## Создать рецепт(POST):

    http://127.0.0.1:8000/receipts/add

## Получить все рецепты(GET):

    http://127.0.0.1:8000/receipts/all

## Получить конкретный рецепт по ID(GET):

    http://127.0.0.1:8000/receipts/<ID рецепта>

## Забанить рецепт(PATCH):

    http://127.0.0.1:8000/admin/ban_receipt/<ID рецепта>

## Разбанить рецепт(PATCH):

    http://127.0.0.1:8000/admin/unban_receipt/<ID рецепта>

## Изменить свой рецепт(PATCH):

    http://127.0.0.1:8000/receipts/update_receipt/<ID-рецепта>

## Удалить свой рецепт(DELETE):

    http://127.0.0.1:8000/receipts/delete_receipt/<ID-рецепта>

## Поставить/снять лайк рецепту(POST):

    http://127.0.0.1:8000/receipts/<ID рецепта>/set_like

## Добавить/удалить из избранного(POST):

    http://127.0.0.1:8000/receipts/<ID рецепта>/add_to_favourites